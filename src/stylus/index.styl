border-display = 1px solid rgba(0, 0, 0, 0.12)
control-panel-w = 25em
toggle-size = control-panel-w / 8
graph-aspect-w = 2
graph-aspect-h = 1

aspect-ratio(width, height)
    position relative
    
    &:before
        content ""
        display block
        padding-top (height / width) * 100%
        
    > .content
        bottom 0
        left 0
        position absolute
        right 0
        top 0

*
    margin 0
    padding 0

.alt-text
    color rgba(0, 0, 0, 0.38)
    z-index -1
    
body
    font-family sans-serif

.crime-breakdown-container
    bottom 0
    left 0
    position absolute
    right 0
    top 2.25em
    
    .crime-breakdown-chart
        position absolute
        top 0
        bottom 0
        size 100% 100%

.crime-breakdown-title
    font-size 1.5em
    line-height 1.5em
    text-align center

.crime-icon
    border-radius 50%
    box-shadow 0 0 0.5em 0 #000
    overflow hidden
    transition box-shadow 0.3s ease, opacity 0.3s ease
    
    &:hover
        box-shadow 0 0.25em 1em 0 #000
        
    .crime-icon-inner
        border-radius 50%
        bottom 0
        left 0
        position absolute
        right 0
        top 0

.crime-toggle
    aspect-ratio 1 1
    
    border-bottom border-display
    border-top border-display
    color rgba(0, 0, 0, 0.87)
    float left
    width toggle-size
    
    & ~ &:before
        border-left border-display
        
    > .content
        background-color #FFF
        border none
        line-height toggle-size
        text-align center
        width 100%
        transition background-color 0.3s ease
        &.toggle-inactive
            background-color #CCC

.crime-toggles
    color rgba(0, 0, 0, 0.87)
    height toggle-size
    top toggle-size
    width 100%
    
    .toggle-info
        font-size 1.2em
        height (toggle-size / @font-size)
        line-height (toggle-size / @font-size)
        text-align center
        width 100%

.facts
    bottom 0
    left 0
    position absolute
    right 0
    top (3.5 * toggle-size)
    
.fancy-select
    z-index 10
    max-height 20em
    
.fancy-select-child
    color rgba(0, 0, 0, 0.87)
    text-align center
    position absolute
    background-color #FFF
    transition top 0.3s ease
    width 100%
    height 100%
    border border-display
    
.loading-overlay
    opacity-fade-time = 0.3s
    
    background rgba(255, 255, 255, 0.7)
    bottom 0
    display none
    left 0
    position absolute
    right 0
    top 0
    transform translateZ(0px)
    transition opacity opacity-fade-time ease
    z-index 1
    
    .loading-message
        bottom 0
        display inline-block
        font-size 2em
        height 33%
        left 0
        line-height 2em
        position absolute
        right 0
        text-align center
        
    &.before-script-load
        animation-duration 1s
        animation-iteration-count 1
        animation-name fadein-loader
        animation-timing-function ease
        display block
        opacity 1

.map-container
    bottom 0
    left 0
    position absolute
    right 0
    top 0
    
.map-overlay
    height 100%
    left 0
    position absolute
    top 0
    transform translateZ(0px)
    width 100%
    z-index 1

.panel
    box-shadow 0 0 1em 0 #000
    position absolute
    
    &.controls
        background-color #FFF
        bottom 0
        overflow-x hidden
        right 0
        top 0
        width control-panel-w
        z-index 10
        
    &.main
        bottom 0
        left 0
        right control-panel-w
        top 0
        z-index 0
        
        .map
            bottom 0
            left 0
            position absolute
            right 0
            top 0

.search-box, .alt-text
    bottom 0
    font-size 1.4em
    left 0
    line-height (2em / @font-size)
    padding (0.5em / @font-size)
    position absolute
    right (3em / @font-size)
    top 0
    
.search-box
    color rgba(0, 0, 0, 0.87)
    z-index 1
    
.search-icon
    border-left border-display
    bottom 0
    color rgba(0, 0, 0, 0.87)
    position absolute
    right 0
    top 0
    width 3em
    text-align center
    
    > .fa
        font-size 1.5em
        line-height 2em
        
.single-crime-icon
    animation-duration 0.3s
    animation-iteration-count 1
    animation-name fadein-icon
    animation-timing-function ease
    
.spinner
    animation-duration 1s
    animation-iteration-count infinite
    animation-name spin
    animation-timing-function linear
    height 0
    left 50%
    position absolute
    right 50%
    text-align center
    top 50%
    
    .fa
        color rgba(0, 0, 0, 0.87)
        display inline-block
        font-size 10em
        left 50%
        position absolute
        top 50%
        transform translate(-50%, -50%)

.sub-panel
    graph-height = 40%
    
    position absolute
        
    &.display
        bottom 0
        left 0
        right 0
        top 3em
        
    &.filter-controls
        bottom 0
        left 0
        right 0
        top (graph-aspect-h/graph-aspect-w * control-panel-w)
        
    &.graph
        aspect-ratio graph-aspect-w graph-aspect-h
        
        border-bottom border-display
        width 100%
        
    &.graph-display
        border-bottom border-display
        bottom 3em
        left 0
        right 0
        top 0
        
    &.search
        border-bottom border-display
        left 0
        right 0
        top 0
        height 3em
        
        
.time-controls
    f-size = 1.2em
    w = control-panel-w / 5 / f-size
    
    border-bottom border-display
    color rgba(0, 0, 0, 0.87)
    height (toggle-size * 1.5)
    position relative
    width 100%
    
    .filler
        left (w * 2)
        
    .time-info
        font-size f-size
        height 40%
        line-height (toggle-size * 0.75 / f-size)
        position absolute
        text-align center
        top 10%
        width 100%
        
    .time-selector
        bottom 0
        display inline-block
        font-size 1.2em
        line-height (toggle-size * 0.75 / f-size)
        position absolute
        text-align center
        top 50%
        white-space nowrap
        width w
        
    .month-max-control
        left (w * 3)
        
    .year-max-control
        left (w * 4)
        
    .year-min-control
        left w

@keyframes fadein-icon
    from
        opacity 0
    to
        opacity 1

@keyframes fadein-loader
    from
        opacity 0
        
    50%
        opacity 0
        
    80%
        opacity 1

@keyframes spin
    from
        transform rotate(0deg)
        
    to
        transform rotate(360deg)
